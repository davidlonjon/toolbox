# Docker aliases
# Some aliases are taken from https://github.com/tcnksm/docker-alias/blob/master/zshrc
# See https://github.com/arunvelsriram/docker-time-sync-agent
alias dksync="/usr/local/bin/docker run --rm --privileged --pid=host walkerlee/nsenter -t 1 -m -u -i -n ntpd -d -q -n -p `if [[ -f /etc/ntp.conf ]]; then cat /etc/ntp.conf | awk '{ print $2 }'; else echo 'pool.ntp.org'; fi`"

# Get container process
alias dkps="docker ps"

# Get process included stop container
alias dkpsa="docker ps -a"

# Get latest container ID
alias dkl="docker ps -l -q"

# Get images
alias dki="docker images"

# Get container IP
alias dkip="docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'"

# Get Docker env setup
alias dke="env | grep DOCKER_"

# Run deamonized container, e.g., $dkd base /bin/echo hello
alias dkd="docker run -d -P"

# Run interactive container, e.g., $dki base /bin/bash
alias dkri="docker run -i -t -P"

# Execute interactive container, e.g., $dex base /bin/bash
alias dkex="docker exec -i -t"

# Stop all containers
dkstop() { docker stop $(docker ps -a -q); }

# Remove all containers
dkrm() { docker rm $(docker ps -a -q); }

# Stop and Remove all containers
alias dkrmf='docker stop $(docker ps -a -q) && docker rm $(docker ps -a -q)'

# Remove all images
dkrmi() { docker rmi $(docker images -q); }

# Dockerfile build, e.g., $dbu tcnksm/test
dkbu() { docker build -t=$1 .; }

# Bash into running container
dkbash() { docker exec -it $(docker ps -aqf "name=$1") bash; }

# Docker system prune
alias dkprune="docker system prune"

# Docker compose aliases
alias dkc="docker-compose"
alias dkcbuild='docker-compose build'
alias dkcps='docker-compose ps'
alias dkcup='docker-compose up'
alias dkcdown='docker-compose down'
alias dkcupd='docker-compose up -d'
alias dkclogs='docker-compose logs'
alias dkcltail='docker-compose logs -f --tail 100'
alias dkcstart='docker-compose start'
alias dkcstop='docker-compose stop'
alias dkcexec='docker-compose exec'
alias dkcebash='function _dkebash(){ docker-compose exec $1 bash; };_dkebash'
alias dkcrun='docker-compose run'

# Docker machine aliases
alias dkm='function _dkm(){ docker-machine $@; };_dkm'
alias dkmenv='function _dkmenv() { eval "$(docker-machine env $@)"; };_dkmenv'
alias dkmout='function _dkmout(){ unset DOCKER_TLS_VERIFY; unset DOCKER_CERT_PATH; unset DOCKER_MACHINE_NAME; unset DOCKER_HOST; };_dkmout'

# Show all alias related docker
dkalias() { alias | grep 'docker' | sed "s/^\([^=]*\)=\(.*\)/\1 => \2/"| sed "s/['|\']//g" | sort; }

# Portainer (https://github.com/portainer/portainer)
#alias portainer_start="docker run -d -p 9999:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer"
#alias portainer_stop="docker stop $(docker ps -q --filter ancestor=portainer/portainer)"
