# -------------------------------------------------------------------
# Projects specific functions
# -------------------------------------------------------------------

# -------------------------------------------------------------------
# Symaps project
# -------------------------------------------------------------------
symaps_fix_tunnelblick() {
    remove_host_route 54.178.183.57
}



# -------------------------------------------------------------------
# Wanderable project
# -------------------------------------------------------------------
function wand-pr() {
	ggpush
	current_branch=$(git rev-parse --abbrev-ref HEAD)
	created_pr=$(hub pull-request -m "$current_branch" -b staging)
	open $created_pr
}


# -------------------------------------------------------------------
# Evasion project
# -------------------------------------------------------------------
function eva-pr() {
	ggpush
	current_branch=$(git rev-parse --abbrev-ref HEAD)
	created_pr=$(hub pull-request -m "$current_branch")
	open $created_pr
}

# -------------------------------------------------------------------
# Fairfax project
# -------------------------------------------------------------------
function bs-urls() {
  curl -s http://localhost:8880/api/providers/docker/frontends | jq -r '. | .. | objects | .rule | select(. != null) | select(endswith("docker.localhost") | not)' | sed -e "s/^Host://" | sed -e "s/;.*//" | sed -e "s/^ *//" | uniq
}

function bs-start() {
	current_dir=$(pwd)
	export DOCKER_CLIENT_TIMEOUT=120
	export COMPOSE_HTTP_TIMEOUT=120
	echo ''
	sleep 1
	cd ${HOME}/workspace/service-development-reverse-proxy && git pull origin master && docker-compose up -d --no-build;
	echo ''
	sleep 1
	cd ${HOME}/workspace/service-tracing && docker-compose up -d --no-build;
	echo ''
	sleep 1
	cd ${HOME}/workspace/service-feature-flags && docker-compose up -d --no-build;
	echo ''
	sleep 1
	cd ${GOPATH}/src/bitbucket.org/ffxblue/api-content && docker-compose up -d --no-build;
	echo ''
	sleep 1
	cd ${GOPATH}/src/bitbucket.org/ffxblue/api-media && docker-compose up -d --no-build;
	echo ''
	sleep 1
	cd ${HOME}/workspace/cms-authoring && docker-compose up -d --no-build;
	echo ''
	sleep 1
	cd ${HOME}/workspace/render-web && docker-compose up -d --no-build;
	cd "$current_dir"
	echo ''
	sleep 1
}

function bs-stop() {
	current_dir=$(pwd)
	export DOCKER_CLIENT_TIMEOUT=120
	export COMPOSE_HTTP_TIMEOUT=120
	echo ''
	sleep 1
	cd ${HOME}/workspace/service-development-reverse-proxy && docker-compose stop;
	echo ''
	sleep 1
	cd ${HOME}/workspace/service-tracing && docker-compose stop;
	echo ''
	echo 'service-feature-flags';
	sleep 1
	cd ${HOME}/workspace/service-feature-flags && docker-compose stop;
	echo ''
	sleep 1
	cd ${GOPATH}/src/bitbucket.org/ffxblue/api-content && docker-compose stop;
	echo ''
	sleep 1
	cd ${GOPATH}/src/bitbucket.org/ffxblue/api-media && docker-compose stop;
	echo ''
	sleep 1
	cd ${HOME}/workspace/cms-authoring && docker-compose stop;
	echo ''
	sleep 1
	cd ${HOME}/workspace/render-web && docker-compose stop;
	cd "$current_dir"
	echo ''
	sleep 1
}

function bs-update() {
	current_dir=$(pwd)
	cd ${HOME}/workspace/service-feature-flags && docker-compose pull
	cd ${GOPATH}/src/bitbucket.org/ffxblue/api-content && docker-compose pull
	cd ${GOPATH}/src/bitbucket.org/ffxblue/api-media && docker-compose pull
	cd ${HOME}/workspace/cms-authoring && docker-compose pull
	cd ${HOME}/workspace/render-web && docker-compose pull
	cd "$current_dir"
}
