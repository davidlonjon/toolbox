# Turn hidden files on/off in Finder
function hiddenOn() { defaults write com.apple.Finder AppleShowAllFiles YES ; }
function hiddenOff() { defaults write com.apple.Finder AppleShowAllFiles NO ; }

# myIP address
function myip() {
    ifconfig lo0 | grep 'inet ' | sed -e 's/:/ /' | awk '{print "lo0       : " $2}'
    ifconfig en0 | grep 'inet ' | sed -e 's/:/ /' | awk '{print "en0 (IPv4): " $2 " " $3 " " $4 " " $5 " " $6}'
    ifconfig en0 | grep 'inet6 ' | sed -e 's/ / /' | awk '{print "en0 (IPv6): " $2 " " $3 " " $4 " " $5 " " $6}'
    ifconfig en1 | grep 'inet ' | sed -e 's/:/ /' | awk '{print "en1 (IPv4): " $2 " " $3 " " $4 " " $5 " " $6}'
    ifconfig en1 | grep 'inet6 ' | sed -e 's/ / /' | awk '{print "en1 (IPv6): " $2 " " $3 " " $4 " " $5 " " $6}'
}

# Nice mount (http://catonmat.net/blog/another-ten-one-liners-from-commandlingfu-explained)
# Displays mounted drive information in a nicely formatted manner
function nicemount() { (echo "DEVICE PATH TYPE FLAGS" && mount | awk '$2="";1') | column -t ; }

function chromecanary () {
    /Applications/Google\ Chrome\ Canary.app/Contents/MacOS/Google\ Chrome\ Canary -disable-prompt-on-repost 2>&1 &
    # /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome $* 2>&1 &
}

# Taken from https://github.com/mathiasbynens/dotfiles/blob/master/.functions
# Change working directory to the top-most Finder window location
function cdf() { # short for `cdfinder`
    cd "$(osascript -e 'tell app "Finder" to POSIX path of (insertion location as alias)')"
}

# Taken from https://github.com/mathiasbynens/dotfiles/blob/master/.functions
# Manually remove a downloaded app or file from the quarantine
function unquarantine() {
    for attribute in com.apple.metadata:kMDItemDownloadedDate com.apple.metadata:kMDItemWhereFroms com.apple.quarantine; do
        xattr -r -d "$attribute" "$@"
    done
}

# Using netcat for remote copy and paste
# Inspired from
# https://gist.github.com/focusaurus/3907446
# and
# https://gist.github.com/dergachev/8259104

nc-send() {
  nc localhost $1
}

remote-paste() {
  while (true);
  do
    echo "Waiting..." ;
    nc -l $1 | pbcopy;
    echo "Copied: ";
    pbpaste | sed 's/^/  /';
    sleep 1
  done
}

function jcurl() {
    "$@" | underscore print --color
}


# Remove host route
remove_host_route() {
    sudo route delete $1
}

# Composer xdebug fix
# See https://getcomposer.org/doc/articles/troubleshooting.md#xdebug-impact-on-composer
function composer() { COMPOSER="/usr/local/bin/composer" || { echo "Could not find composer in path" >&2 ; return 1 ; } && mv /usr/local/etc/php/7.0/conf.d/ext-xdebug.ini /usr/local/etc/php/7.0/ext-xdebug.ini.dis ; $COMPOSER "$@" ; STATUS=$? ; mv /usr/local/etc/php/7.0/ext-xdebug.ini.dis /usr/local/etc/php/7.0/conf.d/ext-xdebug.ini ; return $STATUS ; }
